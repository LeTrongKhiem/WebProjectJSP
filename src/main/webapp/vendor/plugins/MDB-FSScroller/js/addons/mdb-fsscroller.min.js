!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if((b=a.event.fix(g)).type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(j=m=-1*g.deltaY),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120==0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),function($){$.fn.fullScreenScroller=function(params){params=$.extend({animSpeedMainView:700,animSpeedSubView:700,animEffectMainView:"easeInOutCubic",animEffectSubView:"easeInOutCubic",animEffectMainViewCss3:"ease",animEffectSubViewCss3:"ease",useKeyboard:!0,useScrollbar:!1,changeWhenAnim:!0,loopMainViews:!1,loopSubViews:!1,fitToView:!0,timeToFit:1e3,fixedWidth:0,spaceMainBag:0,beforeChange:null,afterChange:null,beforeResize:null,afterResize:null,viewsHeight:[]},params),$.fn.fullScreenScroller.setAnimSpeedMainView=function(val){var animSpeedMainView=700;params.animSpeedMainView=parseInt(val,10)||700},$.fn.fullScreenScroller.setAnimSpeedSubView=function(val){var animSpeedSubView=700;params.animSpeedSubView=parseInt(val,10)||700},$.fn.fullScreenScroller.setAnimEffectMainView=function(effectName){params.animEffectMainView=effectName},$.fn.fullScreenScroller.setAnimEffectSubView=function(effectName){params.animEffectSubView=effectName},$.fn.fullScreenScroller.setAnimEffectMainViewCss3=function(effectName){params.animEffectMainViewCss3=effectName},$.fn.fullScreenScroller.setAnimEffectSubViewCss3=function(effectName){params.animEffectSubViewCss3=effectName},$.fn.fullScreenScroller.setUseKeyboard=function(isActive){params.useKeyboard=isActive},$.fn.fullScreenScroller.setChangeWhenAnim=function(isActive){params.changeWhenAnim=isActive},$.fn.fullScreenScroller.setLoopMainViews=function(isActive){params.loopMainViews=isActive},$.fn.fullScreenScroller.setLoopSubViews=function(isActive){params.loopSubViews=isActive},$.fn.fullScreenScroller.setFitToView=function(isActive){params.fitToView=isActive},$.fn.fullScreenScroller.setTimeToFit=function(val){var timeToFit=1e3;params.timeToFit=parseInt(val,10)||1e3},$.fn.fullScreenScroller.setUseScrollbar=function(isActive){params.useScrollbar=isActive,changeView(allBagObjs[0],allBagObjs[0].viewsData.views[0],!1,!1),changeCssOnScrollbarVisible(),onResize(!1,!1,!1)},$.fn.fullScreenScroller.setFixedWidth=function(val){params.fixedWidth=parseInt(val,10)||0,setMainbagDimWhenFixed(),calcViewsDimensions(),onResize(!1,!0,!1)},$.fn.fullScreenScroller.setSpaceMainBag=function(val){params.spaceMainBag=parseInt(val,10)||0,calcViewsDimensions(),onResize(!1,!0,!1)},$.fn.fullScreenScroller.showMainView=function(dir){showMainView("next"===dir?direction.NEXT:direction.PREV)},$.fn.fullScreenScroller.showSubView=function(bagNbr,dir){showSubView(bagNbr,"next"===dir?direction.NEXT:direction.PREV)},$.fn.fullScreenScroller.showView=function(anchor){setHash(anchor,!1)},$.fn.fullScreenScroller.getCurrentBagNbr=function(){return getCurrBagNbr()};var mainbag_sel=".full-screen-scroller",subbag_sel=".fss-subview",mainview_sel=".fss-mainview",subview_sel=".fss-subview-item",anchor_sel=".fss-nav-item",active_sel=".fss-active",center_sel=".fss-center",subviewprev_sel=".fss-subview-prev",subviewnext_sel=".fss-subview-next",mainviewprev_sel=".fss-mainview-prev",mainviewnext_sel=".fss-mainview-next",getallmainviews_sel=mainbag_sel+">"+mainview_sel,getallsubviews_sel=subbag_sel+">"+subview_sel,bagType_MAINBAG=0,bagType_SUBBAG=1,direction={NEXT:1,PREV:-1},timeoutId=0,timeouts=[],times=0,allBagObjs=[],byAnchor=!1,currentMainView="",stopHashEvent=!1,$window=$(window),$document=$(document),windowHeight=$window.height(),windowWidth=$window.width(),isChanging=!1,isStart=!1,startTime=Date.now(),stepViaX=10,stepViaY=50,correctHeight=!0;function SelectorCache(){var collection={};function getFromCache(selector){return void 0===collection[selector]&&(collection[selector]=$(selector)),collection[selector]}return{get:getFromCache}}var sel=new SelectorCache,addIndexOf=function(){var len;Array.prototype.indexOf||(Array.prototype.indexOf=function(viewsData,start){for(var i=start||0,j=len=this.length;i<j;i++)if(this[i]===viewsData)return i;return-1})},addIncludes=function(){String.prototype.includes||(String.prototype.includes=function(){"use strict";return-1!==String.prototype.indexOf.apply(this,arguments)})},isMobile=function(){return void 0!==window.orientation},isMobileOrientation=function(){var currWindowHeight=$window.height(),currWindowWidth=$window.width();return Math.abs(windowHeight-currWindowHeight)>100?(windowHeight=currWindowHeight,!0):Math.abs(windowWidth-currWindowWidth)>100&&(windowWidth=currWindowWidth,!0)},getViewName=function(mainViewNbr,view){var viewId="#"+view.attr("fss-anchor");return"#undefined"===viewId&&(viewId=""),mainViewNbr+viewId},getAllMainViews=function(){var mainViews=[];return sel.get(getallmainviews_sel).each(function(mainViewNbr){mainViews.push(getViewName(mainViewNbr,$(this)))}),mainViews},getAllSubViews=function(mainViewNbr){var subViews=[],subViewNbr=0,subViewsLength,getSpecifiedMainView;for(sel.get(getallmainviews_sel).slice(mainViewNbr,mainViewNbr+1).find(sel.get(getallsubviews_sel)).each(function(subViewNbr){subViews.push(getViewName(subViewNbr,$(this)))}),subViewsLength=subViews.length;subViewNbr<subViewsLength;)subViewNbr++;return subViews},getBagNbr=function(viewName){for(var bagObjNbr=0,len=allBagObjs.length;bagObjNbr<len;bagObjNbr++)for(var viewNbr=0,len2=allBagObjs[bagObjNbr].viewsData.views.length;viewNbr<len2;viewNbr++)if(allBagObjs[bagObjNbr].viewsData.views[viewNbr].split("#")[1]===viewName)return bagObjNbr;return-1},getCurrBagNbr=function(){if(window.location.hash.indexOf("#")>-1){urlViewName=window.location.hash.replace("#","");var subviews=[],anchor_sel="div[fss-anchor="+urlViewName+"], section[fss-anchor="+urlViewName+"], article[fss-anchor="+urlViewName+"]";return sel.get(anchor_sel).find(sel.get(getallsubviews_sel)).each(function(idx){subviews.push($(this).attr("fss-anchor"))}),subviews.length>0?getBagNbr(subviews[0]):0===subviews.length&&(sel.get(anchor_sel).parents(sel.get(subbag_sel)).each(function(idx){subviews.push($(this).attr("class"))}),subviews.length>0&&subviews[0].includes(subbag_sel.replace(".","")))?getBagNbr(urlViewName):-1}return 0},setHash=function(id,addHash){stopHashEvent=!0===addHash;var ffsNavItemHrefToId=".fss-nav-item[href='#"+id+"']";$(ffsNavItemHrefToId).parent().find(".fss-nav-item").removeClass("active"),$(ffsNavItemHrefToId).addClass("active"),window.location.hash=id},createBagObj=function(container,views,bagType){var newBagObj=new bagObject;return newBagObj.setBagObj(container,views,bagType),newBagObj},createBagObjsForAllSubViews=function(mainViews){for(var subViews=[],mainViewName="",mainViewNbr=0,subViewNbr=0,len=mainViews.length;mainViewNbr<len;)subViews=getAllSubViews(mainViewNbr),mainViewName=mainViews[mainViewNbr].split("#")[1],subViews.length>0&&(allBagObjs.push(createBagObj(subbag_sel+"|"+subViewNbr+"|"+mainViewName+"|"+mainViewNbr,subViews,bagType_SUBBAG)),subViewNbr++),mainViewNbr++},createBagObjsForAllViews=function(){var mainViews=getAllMainViews();allBagObjs.push(createBagObj(mainbag_sel,mainViews,bagType_MAINBAG)),createBagObjsForAllSubViews(mainViews)},changeViewOnHashChange=function(){var id,viewData;!1===stopHashEvent&&window.location.hash.indexOf("#")>-1&&(id=window.location.hash.replace("#",""),void 0!==(viewData=getViewDataForID(id))&&viewData.length>0&&changeView(allBagObjs[viewData[0]],viewData[1],!1,!1)),stopHashEvent=!1},getViewDataForID=function(id){for(var viewData=[],views,bagType,subObjNbr=0,len=allBagObjs.length;subObjNbr<len;subObjNbr++){views=allBagObjs[subObjNbr].viewsData.views,bagType=allBagObjs[subObjNbr].viewsData.bagType;for(var viewNbr=0,len2=views.length;viewNbr<len2;viewNbr++)if(views[viewNbr].indexOf("#")>-1&&views[viewNbr].split("#")[1]===id)return viewData.push(subObjNbr,views[viewNbr],bagType),viewData}},getViewNbr=function(bagObj,direction){var nbr=bagObj.viewsData.views.indexOf(bagObj.viewsData.activeView)+direction;return(params.loopSubViews&&void 0===bagObj.viewsData.views[nbr]&&bagObj.viewsData.container.includes(subbag_sel)||params.loopMainViews&&void 0===bagObj.viewsData.views[nbr]&&bagObj.viewsData.container.includes(mainbag_sel))&&(nbr=nbr<0?bagObj.viewsData.views.length-1:0),nbr},changeCssOnScrollbarVisible=function(){sel.get("body").css("overflow-y","hidden"),sel.get("html").css("overflow-y","hidden"),params.useScrollbar?sel.get(".full-screen-scroller").css("overflow-y","scroll"):sel.get(".full-screen-scroller").css("overflow-y","hidden")},checkIfResize=function(animSpeed,isResize){var resizeWindowTime=1;return isResize?1:animSpeed},calcViewsPos=function(bagObj){var isValidVHA;bagObj.viewsData.viewsPos.length=0,isValidVHA=isValidViewsHeightArray();for(var viewNbr=0,len=bagObj.viewsData.views.length;viewNbr<len;viewNbr++)bagObj.viewsData.bagType===bagType_SUBBAG?setSubViewsPos(bagObj,viewNbr):setMainViewsPos(bagObj,viewNbr,isValidVHA)},setSubViewsPos=function(bagObj,viewNbr){var width=sel.get(mainbag_sel).width();windowWidth=$window.width(),width=0===params.fixedWidth?windowWidth-params.spaceMainBag:params.fixedWidth,bagObj.viewsData.viewsPos.push(width*viewNbr)},setMainViewsPos=function(bagObj,viewNbr,isValidVHA){windowHeight=$window.height(),0===viewNbr?bagObj.viewsData.viewsPos.push(0):viewNbr>0&&isValidVHA&&params.viewsHeight.length>=viewNbr&&0!==params.viewsHeight[viewNbr-1]?bagObj.viewsData.viewsPos.push(bagObj.viewsData.viewsPos[viewNbr-1]+params.viewsHeight[viewNbr-1]):viewNbr>0&&bagObj.viewsData.viewsPos.push(bagObj.viewsData.viewsPos[viewNbr-1]+windowHeight)},calcViewPos=function(viewsPosArr){for(var currPos=$window.scrollTop(),prevDiffPos=0,diffPos=0,getArrNbr=0,viewPosNbr=0,len=viewsPosArr.length;viewPosNbr<len;viewPosNbr++)(diffPos=Math.abs(viewsPosArr[viewPosNbr]-currPos))<prevDiffPos&&(getArrNbr=viewPosNbr),prevDiffPos=diffPos;return getArrNbr},calcViewsDimensions=function(){var width=sel.get(mainbag_sel).width(),height=$window.height();width=0===params.fixedWidth?$window.width()-params.spaceMainBag:params.fixedWidth,sel.get(mainbag_sel).css("width",width+"px"),sel.get(mainview_sel).css("height",height+"px"),isValidViewsHeightArray()&&setViewHeight(height),sel.get(subview_sel).css("width",width+"px"),sel.get(subbag_sel).each(function(idx){$(this).css("width",width*$(this).find(subview_sel).length+"px")})},setViewHeight=function(height){var currViewHeight;Array.prototype.forEach.call(params.viewsHeight,function(viewHeight,viewNbr){0===(currViewHeight=parseInt(viewHeight,10))&&(currViewHeight=height),viewNbr++,sel.get(".fss-mainview:nth-child("+viewNbr+")").css("height",currViewHeight+"px")})},isValidViewsHeightArray=function(){return Array.prototype.forEach.call(params.viewsHeight,function(viewHeight){if(isNaN(viewHeight)||parseInt(viewHeight,10)<0)return!1}),!0},addClassesForSubBags=function(){sel.get(subbag_sel).each(function(subBagNbr){$(this).addClass(subbag_sel.replace(".","")+"-"+subBagNbr)})},addWrappersForSubBags=function(){sel.get(subbag_sel).wrap('<div style="overflow: hidden; height: 100%; width: 100%;"></div>')},setStartDimension=function(){0===params.fixedWidth?sel.get(mainbag_sel).css("width",sel.get(mainbag_sel).width()-params.spaceMainBag+"px"):sel.get(mainbag_sel).css("width",params.fixedWidth+"px")},setMainbagDimWhenFixed=function(){params.fixedWidth>0&&sel.get(mainbag_sel).css({position:"absolute"})},setActiveView=function(){sel.get(mainbag_sel).find(sel.get(active_sel)).each(function(viewNbr){0===viewNbr&&setHash($(this).attr("fss-anchor"))})},showSubView=function(currBagNbr,dir){currBagNbr>-1&&(params.changeWhenAnim||!params.changeWhenAnim&&!isChanging)&&changeView(allBagObjs[currBagNbr],"",!1,!1,dir)},showMainView=function(dir){(params.changeWhenAnim||!params.changeWhenAnim&&!isChanging)&&changeView(allBagObjs[0],"",!1,!1,dir)},animatejQuery=function(elem,viewPos,isResize,orientation,callback){"x"===orientation?elem.stop().animate({scrollLeft:viewPos},checkIfResize(params.animSpeedSubView,isResize),params.animEffectSubView,function(){"function"==typeof callback&&callback()}):elem.stop().animate({scrollTop:viewPos},checkIfResize(params.animSpeedMainView,isResize),params.animEffectMainView,function(){"function"==typeof callback&&callback()})},changeView=function(bagObj,viewName,isResize,isScroll,direction){var indexOfView,viewPosition,viewType,viewSelector,container,containerNbr,elem;void 0!==direction&&(viewName=bagObj.viewsData.views[getViewNbr(bagObj,direction)]),bagObj.viewsData.views.length>0&&void 0!==viewName&&(indexOfView=bagObj.viewsData.views.indexOf(viewName),viewPosition=bagObj.viewsData.viewsPos[indexOfView],viewType=bagObj.viewsData.bagType,viewSelector=bagObj.viewsData.container,scrollPos=0,(isStart||!1===byAnchor&&(void 0===isResize&&!1===isScroll||bagObj.viewsData.activeView!==viewName&&!1===isResize))&&callFuncBeforeChange(),viewSelector===mainbag_sel?currentMainView=viewName.split("#")[1]:isStart||(isResize||currentMainView===viewSelector.split("|")[2]||(byAnchor=!0,changeView(allBagObjs[0],viewSelector.split("|")[3]+"#"+viewSelector.split("|")[2],!1,!1)),currentMainView=viewSelector.split("|")[2]),isResize||isStart||window.location.hash!==viewName.split("#")[1]&&setHash(viewName.split("#")[1],!0),viewType===bagType_SUBBAG?(container=viewSelector.split("|")[0],containerNbr=viewSelector.split("|")[1],viewSelector=sel.get(container+"-"+containerNbr)):viewSelector=sel.get(viewSelector),elem=viewSelector,isChanging=!0,viewType===bagType_SUBBAG?animatejQuery(elem.parent(),viewPosition,isResize,"x",function(){animationDone(isScroll,bagObj,viewName)}):(isScroll||unbindWheel(),unbindScroll(),animatejQuery(elem,viewPosition,isResize,"y",function(){animationDone(isScroll,bagObj,viewName)}),params.useScrollbar||bindWheel()),isStart||(bagObj.viewsData.activeView=viewName,byAnchor=!1))},animationDone=function(isScroll,bagObj,viewName){callFuncAfterChange(),(params.useScrollbar||isScroll)&&(stopHashEvent=!1,unbindResize(),recalcWindowHeight(),changeViewHeightOnMobileToolbar(),bindResize(),bindScroll()),isChanging=!1,isStart=!1},recalcWindowHeight=function(){$window.height()!==windowHeight&&(onResize(!1,!1,!1),windowHeight=$window.height())},changeViewHeightOnMobileToolbar=function(){if(allBagObjs[0].viewsData.viewsPos.length>1&&isMobile()&&$window.height()!==Math.abs(allBagObjs[0].viewsData.viewsPos[0]-allBagObjs[0].viewsData.viewsPos[1])){calcViewsDimensions();for(var bagObjNbr=0,len=allBagObjs.length;bagObjNbr<len;bagObjNbr++)calcViewsPos(allBagObjs[bagObjNbr]),changeView(allBagObjs[bagObjNbr],allBagObjs[bagObjNbr].viewsData.activeView,!0)}},callFuncBeforeChange=function(){var stop=!1;if("function"==typeof params.beforeChange&&(stop=params.beforeChange()),times++,stop)return!1},callFuncAfterChange=function(){times>0&&("function"==typeof params.afterChange&&params.afterChange(),times-=1)},bindAnchor=function(){sel.get(anchor_sel).on("click",onAnchor)},onAnchor=function(event){var currHashId,viewData,id;event.preventDefault(),id=$(this).attr("href").replace("#",""),viewData=getViewDataForID(id),currHashId=window.location.hash.substr(1),viewData&&viewData.length>0&&(params.changeWhenAnim||!params.changeWhenAnim&&!isChanging||id!==currHashId)&&setHash(id)},bindHashChange=function(){$window.on("hashchange",changeViewOnHashChange)},unbindHashChange=function(){$window.off("hashchange",changeViewOnHashChange)},bindScroll=function(){$window.on("scroll",onScroll)},unbindScroll=function(){$window.off("scroll",onScroll)},onScroll=function(){var idx,go,currPos;idx=calcViewPos(allBagObjs[0].viewsData.viewsPos),clearTimeout(timeoutId),unbindHashChange(),window.location.hash!=="#"+allBagObjs[0].viewsData.views[idx].split("#")[1]&&(setHash(allBagObjs[0].viewsData.views[idx].split("#")[1],!1),allBagObjs[0].viewsData.activeView=allBagObjs[0].viewsData.views[idx]),timeoutId=setTimeout(function(){bindHashChange()},10),Array.prototype.forEach.call(timeouts,function(elem){clearTimeout(elem)}),currPos=$window.scrollTop(),timeouts.length=0,timeouts.push(setTimeout(function(){params.fitToView&&(go=!0,Array.prototype.forEach.call(allBagObjs[0].viewsData.viewsPos,function(elem){elem===currPos&&(go=!1)}),go&&(isStart=!0,changeView(allBagObjs[0],allBagObjs[0].viewsData.activeView,!1,!1)))},params.timeToFit))},bindWheel=function(){$window.on("mousewheel",onMouseWheel)},unbindWheel=function(){$window.off("mousewheel",onMouseWheel)},onMouseWheel=function(event){var wheelTime=Date.now(),timeDiff=wheelTime-startTime;startTime=wheelTime,!event.ctrlKey&&timeDiff>50&&(event.deltaY<0?showMainView(direction.NEXT):showMainView(direction.PREV))},bindPrevNextClickEvent=function(){sel.get(subviewprev_sel).each(function(idx){$(this).on("click",function(){currBagNbr=getCurrBagNbr(),currBagNbr>-1&&showSubView(currBagNbr,direction.PREV)})}),sel.get(subviewnext_sel).each(function(idx){$(this).on("click",function(){currBagNbr=getCurrBagNbr(),currBagNbr>-1&&showSubView(currBagNbr,direction.NEXT)})}),sel.get(mainviewprev_sel).each(function(idx){$(this).on("click",function(){showMainView(direction.PREV)})}),sel.get(mainviewnext_sel).each(function(idx){$(this).on("click",function(){showMainView(direction.NEXT)})})},bindTouch=function(){touchAttachEvents(window)},bindResize=function(){$window.on("resize",onResize)},unbindResize=function(){$window.off("resize",onResize)},onResize=function(e,isRoomChange,isCallback){if(!isMobile()||isRoomChange||isMobile()&&isMobileOrientation()){"function"==typeof params.beforeResize&&void 0===isCallback&&params.beforeResize(),calcViewsDimensions();for(var bagObjNbr=0,len=allBagObjs.length;bagObjNbr<len;bagObjNbr++)calcViewsPos(allBagObjs[bagObjNbr]),changeView(allBagObjs[bagObjNbr],allBagObjs[bagObjNbr].viewsData.activeView,!0);"function"==typeof params.afterResize&&void 0===isCallback&&params.afterResize()}},bindKeyboard=function(){$document.on("keydown",onKeyDown)},unbindKeyboard=function(){$document.off("keydown",onKeyDown)},onKeyDown=function(e){var UP_KEY_CODE=38,DOWN_KEY_CODE=40,LEFT_KEY_CODE=37,RIGHT_KEY_CODE=39,HOME_KEY_CODE=36,END_KEY_CODE=35,PAGEUP_KEY_CODE=33,PAGEDOWN_KEY_CODE=34,currBagNbr=0,getKey,keynum=function(e){return window.event?e.keyCode:e.which?e.which:void 0}(e);if(currBagNbr=getCurrBagNbr(),params.useKeyboard)switch(keynum){case 33:case 38:params.useScrollbar||showMainView(direction.PREV);break;case 34:case 40:params.useScrollbar||showMainView(direction.NEXT);break;case 39:0===currBagNbr&&(currBagNbr=1),currBagNbr>-1&&showSubView(currBagNbr,direction.NEXT);break;case 37:0===currBagNbr&&(currBagNbr=1),currBagNbr>-1&&showSubView(currBagNbr,direction.PREV);break;case 36:params.useScrollbar||setHash(allBagObjs[0].viewsData.views[0].split("#")[1]);break;case 35:params.useScrollbar||setHash(allBagObjs[0].viewsData.views[allBagObjs[0].viewsData.views.length-1].split("#")[1])}},touchable,touches=[],posXGlobal=0,posYGlobal=0,cursorPos={x:null,y:null},isTouchDevice=function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},touchAttachEvents=function(elem){window.PointerEvent&&elem.addEventListener("pointermove",onCursorMove,!1),touchable&&(elem.addEventListener("touchstart",onTouchStart,!1),elem.addEventListener("touchmove",onCursorMove,!1),elem.addEventListener("touchend",onTouchEnd,!1))},touchesChange=function(event){return setPointerPosition(event),cursorPos.x+"|"+cursorPos.y},setPointerPosition=function(event){var touchesLength;if(touchable){if(touches=event.touches){touchesLength=touches.length;for(var touchNbr=0;touchNbr<touchesLength;touchNbr++){var touch=touches[touchNbr];cursorPos.x=getCursorPosX(touch),cursorPos.y=getCursorPosY(touch)}}}else cursorPos.x=getCursorPosX(event),cursorPos.y=getCursorPosY(event)},onTouchStart=function(event){var pos=touchesChange(event).split("|");posXGlobal=parseInt(pos[0],10),posYGlobal=parseInt(pos[1],10)},onTouchEnd=function(event){var pos=touchesChange(event).split("|"),currBagNbr=0,stepX=10,stepY=50,afterPos0=parseInt(pos[0],10),afterPos1=parseInt(pos[1],10),beforePosXPrev=parseInt(posXGlobal+10,10),beforePosXNext=parseInt(posXGlobal-10,10),beforePosYPrev=parseInt(posYGlobal+50,10),beforePosYNext=parseInt(posYGlobal-50,10);Math.abs(afterPos0-posXGlobal)<Math.abs(afterPos1-posYGlobal)?afterPos1>beforePosYPrev?params.useScrollbar||showMainView(direction.PREV):afterPos1<beforePosYNext&&(params.useScrollbar||showMainView(direction.NEXT)):(currBagNbr=getCurrBagNbr())>-1&&(afterPos0>beforePosXPrev?showSubView(currBagNbr,direction.PREV):afterPos0<beforePosXNext&&showSubView(currBagNbr,direction.NEXT))},onCursorMove=function(event){params.useScrollbar||(event.preventDefault?event.preventDefault():event.returnValue=!1),setPointerPosition(event)},getCursorPosX=function(obj){return obj.clientX},getCursorPosY=function(obj){return obj.clientY},init,bagObject=function(){var viewsData={activeView:"",container:"",bagType:bagType_MAINBAG,views:[],viewsPos:[]},setBagObj;return{setBagObj:function(container,viewList,bagType){viewsData.container=container,viewsData.views=viewList,viewsData.bagType=bagType,viewsData.activeView=viewsData.views[0]},viewsData:viewsData}};(function(){touchable=isTouchDevice(),addIndexOf(),addIncludes(),setStartDimension(),addClassesForSubBags(),addWrappersForSubBags(),calcViewsDimensions(),changeCssOnScrollbarVisible(),createBagObjsForAllViews();for(var bagObjNbr=0,len=allBagObjs.length;bagObjNbr<len;bagObjNbr++)calcViewsPos(allBagObjs[bagObjNbr]);onResize(!1,!1,!1),params.useScrollbar||bindWheel(),setActiveView(),changeViewOnHashChange(),bindAnchor(),bindHashChange(),bindScroll(),bindResize(),bindTouch(),bindPrevNextClickEvent(),params.useKeyboard&&bindKeyboard(),setMainbagDimWhenFixed()})()}}(jQuery);