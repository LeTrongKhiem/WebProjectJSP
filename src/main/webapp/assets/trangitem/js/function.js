function go_link_on_select(name_select){var domain=location.host;$(name_select).on('change',function(){var link=$(name_select+' option:selected').attr('data-link');window.location=link;});};function getIdVideo(link){var videoid=link.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/);return videoid;}
function getThumbYoutube(url,size){var video,results;if(url===null){return '';}
if(size=='big'){size='big';}else{size='small';}
results=url.match('[\\?&]v=([^&#]*)');if(results==null){video=url;}else{video=results[1];}
if(size=='small'){return 'https://img.youtube.com/vi/'+video+'/2.jpg';}else{return 'https://img.youtube.com/vi/'+video+'/0.jpg';}};function getIdYoutube(html){var pattern1=/(?:http?s?:\/\/)?(?:www\.)?(?:vimeo\.com)\/?(.+)/g;var pattern2=/(?:http?s?:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?(.+)/g;var pattern3=/([-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?(?:jpg|jpeg|gif|png))/gi;if(pattern1.test(html)){var replacement='<iframe src="https://player.vimeo.com/video/$1?autoplay=1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';var html=html.replace(pattern1,replacement);}
if(pattern2.test(html)){var replacement='<iframe src="https://www.youtube.com/embed/$1?autoplay=1" frameborder="0" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe>';var html=html.replace(pattern2,replacement);}
if(pattern3.test(html)){var replacement='<a href="$1" target="_blank"><img class="sml" src="$1" /></a><br />';var html=html.replace(pattern3,replacement);}
return html;};function getUrlYoutube(url){video_id=getIdVideo(url);url='https://www.youtube.com/watch?v='+video_id[1];return url;}
function view_detail(height,show_btn_id,hidden_btn_id,show_box_class){$('#'+show_btn_id).css('display','none');$('#'+hidden_btn_id).css('display','inline-block');if(height=='auto'){$('.'+show_box_class).css('height','auto');}else{$('.'+show_box_class).animate({height:height},1000);};};function isExist(arr,x){for(let i=0;i<arr.length;i++){if(arr[i]===x)return true;}
return false;}
function removeDeduplicate(arr){var ans=[];arr.forEach(function(element){if(!isExist(ans,element)){ans.push(element);}});return ans;}
function format_number(number){number+='';x=number.split('.');x1=x[0];x2=x.length>1?'.'+x[1]:'';var rgx=/(\d+)(\d{3})/;while(rgx.test(x1)){x1=x1.replace(rgx,'$1'+'.'+'$2');}
return x1+x2;}
function format_price(number=0,is_deal=0){if(is_deal&&number==0){return '0 ₫';}
if(number>=68000000||number==0){number="Liên hệ";}else{number+='';x=number.split('.');x1=x[0];x2=x.length>1?'.'+x[1]:'';var rgx=/(\d+)(\d{3})/;while(rgx.test(x1)){x1=x1.replace(rgx,'$1'+'.'+'$2');}
number=x1+x2+" ₫";}
return number;}
function textarea_to_array(str){return str.split('\n');}
function format_datetime(date){var date=new Date(date);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();hour=date.getHours();minute=date.getMinutes();second=date.getSeconds();return hour+':'+minute+' '+day+'/'+month+'/'+year;}
function validateEmail(email){var re=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(String(email).toLowerCase());}
function openPopup(clickShowBtn,popupShow){$(clickShowBtn).on('click',function(){$(popupShow).bPopup({speed:450,transition:'slideDown',zIndex:99999,onOpen:function(){$(popupShow).css('visibility','visible');},onClose:function(){$(popupShow).css('visibility','hidden');}});});}
function closePopup(clickCloseBtn,popupClose){$(clickCloseBtn).on('click',function(){$(popupClose).css('visibility','hidden');$(popupClose).bPopup().close();})}
function setCookie(key,value){var expires=new Date();expires.setTime(expires.getTime()+(365*24*60*60*1000));document.cookie=key+'='+value+';path=/;expires='+expires.toUTCString();}
function setCookieWithPath(key,path,value){var expires=new Date();expires.setTime(expires.getTime()+(365*24*60*60*1000));document.cookie=key+'='+value+';path='+path+';expires='+expires.toUTCString();}
function getCookie(key){var keyValue=document.cookie.match('(^|;) ?'+key+'=([^;]*)(;|$)');return keyValue?keyValue[2]:null;}
function deleteCookie(key,path){var expires=new Date();expires.setTime(expires.getTime()-1);document.cookie=key+'=; path='+path+'; expires='+expires.toUTCString();}
function resizeImage(image,size=""){remove_characters=replaceAll(image,'//','/');link_img_old=['http:/images.mobilecity.vn/media/images','https:/images.mobilecity.vn/media/images','https://object-storage.tyo1.cloud.z.com/v1/zc_6c13a3172446411fab7837a8a5479710/mobilecityvn/images','https:/sudospaces.com/mobilecity-vn/images','https://sudospaces.com/mobilecity-vn/images','https://mobilecity.vn/mcnews/wp-content/uploads','https:/mobilecity.vn/mcnews/wp-content/uploads','https:/cdn.mobilecity.vn/mobilecity-vn/images',];link_img_news='https://cdn.mobilecity.vn/mobilecity-vn/images';image_replace=remove_characters.replace(link_img_old,link_img_news);explore=image_replace.split('/');count_explore=explore.length;image_year=explore[count_explore-3];image_month=explore[count_explore-2];image_full_path=explore[count_explore-1].split('.');image_name=image_full_path[0];image_extention=image_full_path[1];if(size!=""){image=link_img_news+'/'+image_year+'/'+image_month+'/'+image_name+'-'+size+'.'+image_extention;}else{image=link_img_news+'/'+image_year+'/'+image_month+'/'+image_name+'.'+image_extention;}
return image;}
function replaceAll(str,find,replace){return str.replace(new RegExp(find,'g'),replace);}
function update_url(url_page){history.pushState(null,null,url_page);}
function pushOrUpdate(param_obj){var url=new URL(window.location.href);$.each(param_obj,function(key,value){url.searchParams.set(key,value);})
var newUrl=url.href;update_url(newUrl);}
var getUrlParameter=function(url,name){var results=new RegExp('[\?&]'+name+'=([^&#]*)').exec(url);if(results==null){return null;}
return decodeURI(results[1])||0;}
function loadAjax(url,params,option){var _option={beforeSend:function(){},success:function(){},error:function(){}}
$.extend(_option,option);$.ajax({headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')},type:'POST',url:url,data:params,beforeSend:function(){_option.beforeSend();},success:function(result){_option.success(result);},error:function(result){_option.error(result);}})}
function loadAjaxGet(url,option){var _option={beforeSend:function(){},success:function(){},error:function(){}}
$.extend(_option,option);$.ajax({headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')},type:'GET',url:url,beforeSend:function(){_option.beforeSend();},success:function(result){_option.success(result);},error:function(result){_option.error(result);}})}
function show_paginate(result,data_link,pagination){var page_number=result.last_page;var next_page_url=getUrlParameter(result.next_page_url,'page');var prev_page_url=getUrlParameter(result.prev_page_url,'page');var current_page=parseInt(data_link);var last_page=result.last_page;$(pagination).empty();if(current_page<=1){$(pagination).append("<li class='page-item'><span class='page-link'>‹</span></li>");}else{$(pagination).append("<li class='page-item'><a href='javascript:;' class='page-link' data-link='"+prev_page_url+"'>‹</a></li>");}
if(page_number<10){for(var i=1;i<=page_number;i++){if(current_page==i){$(pagination).append("<li class='page-item active'><span class='page-link'>"+i+"</span></li>");}else{$(pagination).append("<li class='page-item'><a class='page-link' data-link='"+i+"' href='javascript:;'>"+i+"</a></li>");}}}else{for(var i=1;i<=2&&i<current_page;i++){$(pagination).append('<li class="page-item"><a class="page-link" data-link="'+i+'" href="javascript:;">'+i+'</a></li>');}
if(current_page>=6){$(pagination).append('<li class="page-item"><span class="page-link">...</span></li>');}
for(var i=Math.max(current_page-2,3);i<current_page;i++){$(pagination).append('<li class="page-item"><a class="page-link" data-link="'+i+'" href="javascript:;">'+i+'</a></li>');}
$(pagination).append('<li class="page-item active"><span class="page-link">'+current_page+'</span></li>');for(var i=current_page+1;i<=current_page+2&&i<=last_page;i++){$(pagination).append('<li class="page-item"><a class="page-link" data-link="'+i+'" href="javascript:;">'+i+'</a></li>');}
if(last_page-current_page>=5){$(pagination).append('<li class="page-item"><span class="page-link">...</span></li>');}
for(var i=Math.max(current_page+3,last_page-1);i<=last_page;i++){$(pagination).append('<li class="page-item"><a class="page-link" data-link="'+i+'" href="javascript:;">'+i+'</a></li>');}}
if(current_page>=last_page){$(pagination).append("<li class='page-item'><span class='page-link'>›</span></li>");}else{$(pagination).append("<li class='page-item'><a href='javascript:;' class='page-link' data-link='"+next_page_url+"'>›</a></li>");}}
function comment_like(){var like=[];if(getCookie('comment_like')){like=getCookie('comment_like').split(',');}else{deleteCookie("comment_like",window.location.pathname);like=[];}
$('.comment-list').on('click','.comment-like',function(){id=$(this).data('id');value=$(this).children('span.value_like');action_value=$(this).children('span.action');path=window.location.pathname;action="like";if(like.length==0){like.push(''+id+'');}
else{like.forEach(function(element,index){if(element!=id){if(!like.includes(''+id+'')){like.push(''+id+'');action="like";}}else{if(like.indexOf(''+id+'')>-1){like.splice(like.indexOf(''+id+''),1);}
action="dislike";}});}
setCookieWithPath("comment_like",path,like);if(!getCookie('comment_like')){deleteCookie("comment_like",window.location.pathname);}
loadAjaxGet('../ajax/comment/'+id+'/'+action,{beforeSend:function(){},success:function(result){value.text(' '+result+' ');}});});}
function send_comment(url){$('#send_comment').on('click',function(){alert(12);content=$('#content').val();name=$('#name').val();email=$('#email').val();phone=$('#phone').val();rating=$('#rating').val();if(content==""||email==""||name==""||phone==""){alert('Không được để trống nội dung!');}else if(!validateEmail(email)){alert('Định dạng email chưa chính xác!');}else{data={"content":content,"name":name,"email":email,"phone":phone,"rating":rating,};loadAjax(url,data,{beforeSend:function(){$("#loading_box").css({visibility:"visible",opacity:0.0}).animate({opacity:1.0},200);},success:function(result){$("#loading_box").animate({opacity:0.0},200,function(){$("#loading_box").css("visibility","hidden");});$('#content').val('');$('#name').val('');$('#email').val('');$('#phone').val('');$('.alert_message').empty().append(result).css('display','block');setInterval(function(){$('.alert_message').fadeOut(1000);},5000);},error:function(error){$("#loading_box").animate({opacity:0.0},200,function(){$("#loading_box").css("visibility","hidden");});$.alert('Có lỗi xảy ra! Vui lòng thử lại.');}});}});}
function getComment(route){PageNumber=1;loadAjaxGet(route+'?page='+PageNumber,{beforeSend:function(){},success:function(result){$('.comment-list').empty();if(result[0].total!=0){show_paginate(result[0],PageNumber,pagination);result[1].forEach(function(element,index){$('.comment-list').append(element);});}}});$(document).on('click','#pagination .page-item a.page-link',function(e){e.preventDefault();var PageNumber=$(this).data('link');var url_page_link=route+'?page='+PageNumber;loadAjaxGet(url_page_link,{beforeSend:function(){},success:function(result){show_paginate(result[0],PageNumber,pagination);$('.comment-list').empty();result[1].forEach(function(element,index){$('.comment-list').append(element);});$('html, body').animate({scrollTop:$('.comment-search').offset().top-10},500);}});});}
function comment_search(url,route){var suggest=null;$('body').on('keyup','#search_comment',function(){clearTimeout(suggest);keyword=$(this).val();if(keyword.length>0){suggest=setTimeout(function(){data={'keyword':keyword,};loadAjax(url,data,{beforeSend:function(){},success:function(result){$('.comment-pagination').css('display','none');$('.comment-list').empty();result.forEach(function(element,index){$('.comment-list').append(element);});}});},500);}else{getComment(route);$('.comment-pagination').css('display','block');}});}